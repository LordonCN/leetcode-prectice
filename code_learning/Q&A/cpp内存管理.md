# 内存管理

注意要分为5各部分：堆、栈、自由存储区、全局/静态存储区、常量存储区

### 栈 -- 由编译器自动分配释放
在执行函数时，函数内`局部变量的存储单元`都可以在栈上创建，

函数执行结束时这些存储单元自动被释放。
栈内存分配运算内置于处理器的指令集中，效率很高，但是分配的内存容量有限。(如果栈溢出将不可预期的结果)
是由编译器在需要时`自动分配`，不需要时自动清除的变量存储区。通常存放局部变量、函数参数等。

### 堆 -- 一般由程序员分配释放(new)
就是那些由new分配的内存块，他们的释放编译器不去管，由我们的应用程序(程序员)去控制，
一般一个new就要对应一个delete，一个new[]与一个delete[]对应。
如果程序员没有释放掉，那么在程序结束后，操作系统会自动回收。但是程序如果不结束，会造成内存泄漏

### 自由存储区(melloc -- free)
就是那些由malloc等分配的内存块，他和堆是十分相似的，不过它是用free来结束自己的生命的。

### 全局/静态存储区(global static)
全局变量和静态变量被分配到同一块内存中

### 常量存储区(const)
这是一块比较特殊的存储区，他们里面存放的是常量，不允许修改。

# 碎片问题：
对于堆，频繁的new/delete会造成大量碎片，使程序效率降低。
对于栈，它是一个先进后出的队列，进出一一对应，不会产生碎片。

# 生长方向：
堆向上，向高地址方向增长。(参考谷堆)
栈向下，向低地址方向增长。

# 分配方式：
堆都是`动态分配`（没有静态分配的堆）,需要程序员实现。
    栈有`静态分配`和`动态分配`.静态分配由**编译器**完成（如局部变量分配），
动态分配由**alloca函数**分配，但栈的动态分配的资源由编译器进行释放，无需程序员实现。

# 分配效率：
堆由C/C++函数库提供，机制很复杂。所以堆的效率比栈低很多。
栈是极其系统提供的数据结构，计算机在底层对栈提供支持，分配专门寄存器存放栈地址，栈操作有专门指令。
